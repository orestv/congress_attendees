// Generated by CoffeeScript 1.6.1
(function() {
  var SEARCH_TIMEOUT, root,
    _this = this;

  root = typeof exports !== "undefined" && exports !== null ? exports : this;

  SEARCH_TIMEOUT = 250;

  root.SearchBox = (function() {

    function SearchBox(input, f_search, f_select) {
      var _this = this;
      this.input = input;
      this.f_search = f_search;
      this.f_select = f_select;
      this.performSearch = function() {
        return SearchBox.prototype.performSearch.apply(_this, arguments);
      };
      this.inputKeyPressed = function(event) {
        return SearchBox.prototype.inputKeyPressed.apply(_this, arguments);
      };
      this.scheduleSearch = function() {
        return SearchBox.prototype.scheduleSearch.apply(_this, arguments);
      };
      this.keyDownTimeout = null;
      this.input.onkeydown = this.inputKeyPressed;
      this.input.onsearch = this.scheduleSearch;
    }

    SearchBox.prototype.scheduleSearch = function() {
      if (this.keyDownTimeout != null) {
        window.clearTimeout(this.keyDownTimeout);
      }
      return this.keyDownTimeout = window.setTimeout(this.performSearch, SEARCH_TIMEOUT);
    };

    SearchBox.prototype.inputKeyPressed = function(event) {
      if (event.keyCode === 13) {
        this.f_select();
      }
      return this.scheduleSearch();
    };

    SearchBox.prototype.performSearch = function() {
      var text;
      text = this.input.value;
      return this.f_search(text);
    };

    return SearchBox;

  })();

}).call(this);
